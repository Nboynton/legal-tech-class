(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{153:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return u}));var a=n(1),o=n(6),i=(n(0),n(160)),l=n(163),r={id:"assignment-branch-logic",title:"Assignment 3: Branching logic\n",sidebar_label:"Assignment 3"},s={id:"classes/assignment-branch-logic",title:"Assignment 3: Branching logic\n",description:"import useBaseUrl from '@docusaurus/useBaseUrl';",source:"@site/docs/classes/assignment-branch-logic.md",permalink:"/docassemble-class/docs/classes/assignment-branch-logic",editUrl:"https://github.com/nonprofittechy/docassemble-class/edit/master/open-class/docs/classes/assignment-branch-logic.md",sidebar_label:"Assignment 3",sidebar:"someSidebar",previous:{title:"Assignment 2: Object-oriented programming\n",permalink:"/docassemble-class/docs/classes/2020-law-smart-machines-assignment-2"},next:{title:"The YAML file Format",permalink:"/docassemble-class/docs/yaml"}},b=[{value:"Walking Down the Path: Branching Logic",id:"walking-down-the-path-branching-logic",children:[]},{value:"The problem",id:"the-problem",children:[{value:"Thinking through outcomes",id:"thinking-through-outcomes",children:[]},{value:"Gathering the facts",id:"gathering-the-facts",children:[]},{value:"Sorting our questions out",id:"sorting-our-questions-out",children:[]}]},{value:"Map it out",id:"map-it-out",children:[]},{value:"Building our Docassemble interview",id:"building-our-docassemble-interview",children:[{value:"What kinds of information do we need to gather?",id:"what-kinds-of-information-do-we-need-to-gather",children:[]},{value:"Planning out our variables",id:"planning-out-our-variables",children:[]},{value:"Writing our first question blocks",id:"writing-our-first-question-blocks",children:[]},{value:"Setting up the branch logic",id:"setting-up-the-branch-logic",children:[]}]},{value:"The final interview",id:"the-final-interview",children:[]}],c={rightToc:b};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"walking-down-the-path-branching-logic"},"Walking Down the Path: Branching Logic"),Object(i.b)("img",{alt:"Woman at crossroads",src:Object(l.a)("img/einar-storsul-K3W7I7x37Xk-unsplash.jpg")}),"_Photo by Einar Storsul on Unsplash_",Object(i.b)("p",null,"All but the most complex Docassemble interviews will have some choices that change the information\nthat you show to the user or that you will need to ask a follow-up question for. Sometimes, this choice\nmaking is called branching logic. It's the kind of choice that you might think of making with a flowchart."),Object(i.b)("p",null,"In today's class, we'll talk about how to write a Docassemble interview that achieves this goal."),Object(i.b)("h2",{id:"the-problem"},"The problem"),Object(i.b)("p",null,"Suppose you have a friend who comes to you for advice. They were invited to a party, but they're not\nsure if they should go. You give them advice, your friend is happy, and now you have lots of friends coming\nto you looking for advice on the same topic. You decide to write a simple flowchart to help them out."),Object(i.b)("h3",{id:"thinking-through-outcomes"},"Thinking through outcomes"),Object(i.b)("p",null,"What outcomes will our flowchart have?"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Go to the party"),Object(i.b)("li",{parentName:"ol"},"Stay home"),Object(i.b)("li",{parentName:"ol"},"Go, but don't stay too late")),Object(i.b)("h3",{id:"gathering-the-facts"},"Gathering the facts"),Object(i.b)("p",null,"What kind of information do we want to know to advise our friends? Let's think of some possible questions."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Do you like parties?"),Object(i.b)("li",{parentName:"ul"},"Is there anyone there who you want to meet?"),Object(i.b)("li",{parentName:"ul"},"How difficult is it to get to the party?"),Object(i.b)("li",{parentName:"ul"},"Do you have any big assignments or studying you should do?")),Object(i.b)("h3",{id:"sorting-our-questions-out"},"Sorting our questions out"),Object(i.b)("p",null,"Let's think of a logical order for our questions, and how they fit together."),Object(i.b)("p",null,"It might make sense to first learn a little about what the person prefers. It makes\nsense to choose a question order that is respectful of the user's time. Let's think of big\nquestions up front that might reduce the number of unnecessary questions we have to ask later."),Object(i.b)("p",null,"A logical first question might be:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Do you like parties?")),Object(i.b)("p",null,"If they don't like parties at all, they can probably skip this one. But just in case, a good follow-up might be:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Is there anyone there who you want to meet?")),Object(i.b)("p",null,"Followed by"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Do you have any big assigments or studying to do?")),Object(i.b)("p",null,"If they do like parties, we might ask:"),Object(i.b)("ol",{start:2},Object(i.b)("li",{parentName:"ol"},"Do you have a big assignment due?")),Object(i.b)("h2",{id:"map-it-out"},"Map it out"),Object(i.b)("p",null,"For a small problem like this, it might be helpful to write out a small flow chart or map of the logic. For a bigger problem, you might come up with a different way to organize it."),Object(i.b)("p",null,"Below is a flowchart that maps out part of the logic we worked out above:"),Object(i.b)("p",null,Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcblx0QVtEbyB5b3UgbGlrZSBwYXJ0aWVzP10gLS0-IEJ7eWVzfVxuICBBIC0tPiBDe25vfVxuICBDIC0tPkRbSXMgdGhlcmUgYW55b25lIHlvdSB3YW50IHRvIG1lZXQ_XVxuICBEIC0tPkV7eWVzfVxuICBEIC0tPkZ7bm99XG4gIEYgLS0-IFooZmE6ZmEtYmVkIERvbid0IEdvKVxuICBFIC0tPiBHW0RvIHlvdSBoYXZlIGEgYmlnIGFzc2lnbm1lbnQgZHVlP11cbiAgRyAtLT5oe3llc31cbiAgRyAtLT5pe25vfVxuICBpIC0tPlkoZmE6ZmEtZ2lmdCBHbyB0byB0aGUgcGFydHkpXG5cbiAgaCAtLT4gWlxuICBCIC0tPiBHXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"}),Object(i.b)("img",Object(a.a)({parentName:"a"},{src:"https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVERcblx0QVtEbyB5b3UgbGlrZSBwYXJ0aWVzP10gLS0-IEJ7eWVzfVxuICBBIC0tPiBDe25vfVxuICBDIC0tPkRbSXMgdGhlcmUgYW55b25lIHlvdSB3YW50IHRvIG1lZXQ_XVxuICBEIC0tPkV7eWVzfVxuICBEIC0tPkZ7bm99XG4gIEYgLS0-IFooZmE6ZmEtYmVkIERvbid0IEdvKVxuICBFIC0tPiBHW0RvIHlvdSBoYXZlIGEgYmlnIGFzc2lnbm1lbnQgZHVlP11cbiAgRyAtLT5oe3llc31cbiAgRyAtLT5pe25vfVxuICBpIC0tPlkoZmE6ZmEtZ2lmdCBHbyB0byB0aGUgcGFydHkpXG5cbiAgaCAtLT4gWlxuICBCIC0tPiBHXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ",alt:null})))),Object(i.b)("h2",{id:"building-our-docassemble-interview"},"Building our Docassemble interview"),Object(i.b)("h3",{id:"what-kinds-of-information-do-we-need-to-gather"},"What kinds of information do we need to gather?"),Object(i.b)("p",null,"Before we start, let's think about what kinds of information we will want to ask."),Object(i.b)("p",null,"This Docassemble interview will use two kinds of screens:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Yes/no questions"),Object(i.b)("li",{parentName:"ol"},"Ending screens")),Object(i.b)("p",null,"As a reminder, ending screens use the ",Object(i.b)("inlineCode",{parentName:"p"},"event")," specifier. "),Object(i.b)("p",null,"We haven't seen a ",Object(i.b)("inlineCode",{parentName:"p"},"question")," block that uses just a yes/no question yet. Here's a ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://docassemble.org/docs/questions.html#tocAnchor-1-6-1"}),"link to the documentation"),"."),Object(i.b)("p",null,"Let's take a look at an example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"question: |\n  Are you at least 18 years of age?\nyesno: over_eighteen\n")),Object(i.b)("p",null,"And here's what it looks like when we run it:"),Object(i.b)("img",{alt:"Yes/No question",src:Object(l.a)("img/Yes_no.png")}),Object(i.b)("p",null,"Docassemble uses two different kinds of ",Object(i.b)("inlineCode",{parentName:"p"},"question")," blocks. This new kind only lets you ask for one variable on a screen, and doesn't use the ",Object(i.b)("inlineCode",{parentName:"p"},"fields")," specifier we learned earlier. It's kind of a simplified shorcut version."),Object(i.b)("p",null,"Let's look at line 3 of our sample:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"yesno: over_eighteen\n")),Object(i.b)("p",null,"This is a new specifier: the ",Object(i.b)("inlineCode",{parentName:"p"},"yesno")," specifier. It always shows the text ",Object(i.b)("inlineCode",{parentName:"p"},"yes")," and ",Object(i.b)("inlineCode",{parentName:"p"},"no")," as buttons on the screen. On the right hand side of the : is the variable that will be assigned the value ",Object(i.b)("inlineCode",{parentName:"p"},"True")," or ",Object(i.b)("inlineCode",{parentName:"p"},"False"),", depending on which button the user clicks."),Object(i.b)("h3",{id:"planning-out-our-variables"},"Planning out our variables"),Object(i.b)("p",null,"It can help to start out by writing a list of the actual variables we will want to ask. This way, we can plan variable names that make sense together."),Object(i.b)("p",null,"In Docassemble interviews, it's traditional to use variables names that are:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Short"),Object(i.b)("li",{parentName:"ol"},"Descriptive (without cryptic abbreviations)"),Object(i.b)("li",{parentName:"ol"},"Lower-case"),Object(i.b)("li",{parentName:"ol"},"Use _ to separate multiple words when needed")),Object(i.b)("p",null,"We are going to need true/false variables and an ending screen. Let's name them as follows:"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"variable name"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"meaning"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"go_to_party"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A screen that tells the person to go to the party")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"dont_go_to_party"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A screen that says not to go to the party")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"likes_parties"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Do you like parties?")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"wants_to_meet"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Do you want to meet someone there?")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"big_assignment"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Do you have a big assignment due?")))),Object(i.b)("h3",{id:"writing-our-first-question-blocks"},"Writing our first question blocks"),Object(i.b)("p",null,"Let's start with writing the ending blocks, which are the simplest. Remember, we will use the ",Object(i.b)("inlineCode",{parentName:"p"},"event")," specifier for these because they are ending screens."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"---\nevent: go_to_party\nquestion: |\n  You should go to the party!\nsubquestion: |\n  [FILE https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif]\n")),Object(i.b)("p",null,"[",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif",alt:null})),"]"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"---\nevent: dont_go_to_party\nquestion: |\n  You should just go to sleep\nsubquestion: |\n  [FILE https://media.giphy.com/media/xT8qBvH1pAhtfSx52U/giphy.gif]\n")),Object(i.b)("p",null,"[",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"https://media.giphy.com/media/xT8qBvH1pAhtfSx52U/giphy.gif",alt:null})),"]"),Object(i.b)("p",null,"Let's try writing one of the yes/no questions."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"---\nquestion: |\n  Do you like parties?\nyesno: likes_parties\n---\nquestion: |\n  Do you want to meet someone at the party?\nyesno: wants_to_meet\n---\nquestion: | \n  Do you have a big assignment due?\nyesno: big_assignment \n")),Object(i.b)("h3",{id:"setting-up-the-branch-logic"},"Setting up the branch logic"),Object(i.b)("p",null,"We have already seen in class how we can use a ",Object(i.b)("inlineCode",{parentName:"p"},"code")," block to control question order. Now, we're going to combine that with ",Object(i.b)("inlineCode",{parentName:"p"},"if"),"/",Object(i.b)("inlineCode",{parentName:"p"},"else")," statements. These will follow pretty well regular English expressions."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"---\ncomment: |\n  We will write the questions below in the order we want them \n  to appear. Optional questions will be underneath an if statement.\n\n  This will be the only mandatory block in our interview\nmandatory: True\ncode: |\n  if likes_parties:\n    if big_assignment:\n      dont_go_to_party\n    else:\n      go_to_party\n  else: # Doesn't like parties\n    if wants_to_meet:\n      if big_assignment:\n        dont_go_to_party\n      else:\n        go_to_party\n    else:\n      dont_go_to_party\n")),Object(i.b)("h2",{id:"the-final-interview"},"The final interview"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"---\ncomment: |\n  We will write the questions below in the order we want them \n  to appear. Optional questions will be underneath an if statement.\n\n  This will be the only mandatory block in our interview\nmandatory: True\ncode: |\n  if likes_parties:\n    if big_assignment:\n      dont_go_to_party\n    else:\n      go_to_party\n  else: # Doesn't like parties\n    if wants_to_meet:\n      if big_assignment:\n        dont_go_to_party\n      else:\n        go_to_party\n    else:\n      dont_go_to_party\n---\nquestion: |\n  Do you like parties?\nyesno: likes_parties\n---\nquestion: |\n  Do you want to meet someone at the party?\nyesno: wants_to_meet\n---\nquestion: | \n  Do you have a big assignment due?\nyesno: big_assignment \n---\nevent: go_to_party\nquestion: |\n  You should go to the party!\nsubquestion: |\n  [FILE https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif]\n---\nevent: dont_go_to_party\nquestion: |\n  You should just go to sleep\nsubquestion: |\n  [FILE https://media.giphy.com/media/xT8qBvH1pAhtfSx52U/giphy.gif]\n")))}u.isMDXComponent=!0},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b=o.a.createContext({}),c=function(e){var t=o.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):r({},t,{},e)),n},u=function(e){var t=c(e.components);return o.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},h=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,b=s(e,["components","mdxType","originalType","parentName"]),u=c(n),h=a,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||i;return n?o.a.createElement(m,r({ref:t},b,{components:n})):o.a.createElement(m,r({ref:t},b))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=h;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,l[1]=r;for(var b=2;b<i;b++)l[b]=n[b];return o.a.createElement.apply(null,l)}return o.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},161:function(e,t,n){"use strict";var a=n(0),o=n(32);t.a=function(){return Object(a.useContext)(o.a)}},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(161);function o(e){const{siteConfig:t}=Object(a.a)(),{baseUrl:n="/"}=t||{};if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}}}]);